(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"6Mca":function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class u{}var o=t("pMnS"),s=t("MKJQ"),i=t("sZkV"),r=t("s7LF"),a=t("SVse"),b=t("mrSG"),c=t("cMp+");class h{constructor(l,n,t,e,u,o){this.obj=l,this.http=n,this.router=t,this.toastController=e,this.loadingController=u,this.alertController=o,this.resendBtnHide=!1,this.counter=1,this.isNextBtnDisabled=!0,this.spinnerShowHide=!0,this.maxtime=10,this.sec=!0,this.third=!0,this.forth=!0,this.otpForm=new r.f({otp:new r.d}),this.showOtpComponent=!0,this.config={allowNumbersOnly:!1,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"4",inputStyles:{width:"50px",height:"50px"}},this.finalObj=this.obj.customerDetails()}next(l,n,t,e){""!==n?("sec"===e?(console.log("sec"),this.sec=!1):"third"===e?(console.log("th"),this.third=!1):"forth"===e&&(console.log("f"),this.forth=!1),setTimeout(()=>{l.setFocus(),console.log("out")},100)):("five"===e?this.forth=!0:"forth"===e?this.third=!0:"third"===e&&(this.sec=!0),t.setFocus())}StartTimer(){this.timer=setTimeout(l=>{this.maxtime-=1,this.maxtime>0?(console.log(this.maxtime),this.StartTimer()):console.log("complete")},1e3)}handleEvent(l){console.log("Event Trigger : ",l),0===l.left&&(console.log("Time is going to ZERO"),this.resendBtnHide=!0)}resendOTP(){this.counter<3?(this.presentAlert(),this.http.post("https://www.staging.admin.veronicasquote.com/api/otp/generate",{phoneNo:this.finalObj.customer.customerData.phone}).subscribe(l=>{console.log(l),this.countdown.restart(),this.resendBtnHide=!1,this.counter++},l=>{l.error.message&&(this.getErrorTost("Invalid data for field Phone Number"),this.loadingController.dismiss("login"))})):(this.contactUs(),this.loadingController.dismiss("login"))}validateOTP(){console.log(this.otpForm.value.otp),console.log("NUMBER----"+this.finalObj.customer.customerData.phone),this.presentAlert(),this.http.post("https://www.staging.admin.veronicasquote.com/api/otp/verify",{phoneNo:this.finalObj.customer.customerData.phone,otp:this.otpForm.value.otp}).subscribe(l=>{this.spinnerShowHide=!0,this.loadingController.dismiss("login"),this.router.navigate(["/driver-splash"])},l=>{console.log(l),this.loadingController.dismiss("login"),l.error.message&&(console.log(l.error.message),this.getErrorTost(l.error.message))})}ngOnInit(){console.log("NUMBER----"+this.finalObj.customer.customerData.phone),this.number=this.finalObj.customer.customerData.phone,this.StartTimer(),this.finalObj.customer.customerData.phone&&this.otpForm.setValue({otp:""})}getErrorTost(l){return b.b(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,duration:2e3})).present()}))}presentAlert(){return b.b(this,void 0,void 0,(function*(){const l=yield this.loadingController.create({id:"alert"});yield l.present(),yield l.onDidDismiss(),console.log("Loading dismissed!")}))}contactUs(){return b.b(this,void 0,void 0,(function*(){const l=yield this.alertController.create({subHeader:"Please contact our support team",buttons:[{text:"Call us",cssClass:"secondary",handler:l=>{window.location.href="tel:(800) 639-3939"}},{text:"Chat with us",cssClass:"secondary",handler:l=>{window.location.href="https://www.tidio.com/talk/fefv4irzl5mm0eropcqgncfpiiuj32mp"}}]});yield l.present()}))}OTP(l){this.isNextBtnDisabled=!(l.target.value.length>=4)}}var p=t("IheW"),d=t("iInd"),g=e.nb({encapsulation:0,styles:[[".otp[_ngcontent-%COMP%]{color:#a9a9a9;border-style:none;width:60px;height:60px;font-size:50px}table[_ngcontent-%COMP%]{border-collapse:collapse}"]],data:{}});function m(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Hb(1,null,["Resend code in ","s"]))],null,(function(l,n){l(n,1,0,n.component.maxtime)}))}function f(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,2,"span",[["style","text-align: center; color: red;"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.resendOTP()&&e),e}),null,null)),(l()(),e.pb(1,0,null,null,1,"u",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Resend code now."]))],null,null)}function x(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,4,"ion-chip",[["class","disableNext"],["color","danger"],["size","large"]],null,null,null,s.V,s.k)),e.ob(1,49152,null,0,i.r,[e.h,e.k,e.x],{color:[0,"color"]},null),(l()(),e.pb(2,0,null,0,2,"ion-label",[["class","next"]],null,null,null,s.gb,s.v)),e.ob(3,49152,null,0,i.M,[e.h,e.k,e.x],null,null),(l()(),e.Hb(-1,0,["NEXT"]))],(function(l,n){l(n,1,0,"danger")}),null)}function v(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,4,"ion-chip",[["class","enableNext"],["size","large"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.validateOTP()&&e),e}),s.V,s.k)),e.ob(1,49152,null,0,i.r,[e.h,e.k,e.x],null,null),(l()(),e.pb(2,0,null,0,2,"ion-label",[["class","next"]],null,null,null,s.gb,s.v)),e.ob(3,49152,null,0,i.M,[e.h,e.k,e.x],null,null),(l()(),e.Hb(-1,0,["NEXT"]))],null,null)}function k(l){return e.Jb(0,[e.Fb(671088640,1,{countdown:0}),e.Fb(671088640,2,{ngOtpInput:0}),(l()(),e.pb(2,0,null,null,5,"ion-header",[],null,null,null,s.bb,s.q)),e.ob(3,49152,null,0,i.A,[e.h,e.k,e.x],null,null),(l()(),e.pb(4,0,null,0,3,"ion-toolbar",[],null,null,null,s.vb,s.K)),e.ob(5,49152,null,0,i.yb,[e.h,e.k,e.x],null,null),(l()(),e.pb(6,0,null,0,1,"ion-title",[],null,null,null,s.ub,s.J)),e.ob(7,49152,null,0,i.wb,[e.h,e.k,e.x],null,null),(l()(),e.pb(8,0,null,null,50,"ion-content",[],null,null,null,s.X,s.m)),e.ob(9,49152,null,0,i.t,[e.h,e.k,e.x],null,null),(l()(),e.pb(10,0,null,0,48,"div",[["class","flex"]],null,null,null,null,null)),(l()(),e.pb(11,0,null,null,47,"ion-card",[["style","align-self: center !important; width:99%;box-shadow:rgba(0, 0, 0, 0.0) 0px 4px 16px;"]],null,null,null,s.U,s.f)),e.ob(12,49152,null,0,i.l,[e.h,e.k,e.x],null,null),(l()(),e.pb(13,0,null,0,2,"div",[["class","ion-text-center"]],null,null,null,null,null)),(l()(),e.pb(14,0,null,null,1,"ion-progress-bar",[["color","danger"],["style","margin-bottom: 3vh;"],["value","0.3"]],null,null,null,s.kb,s.z)),e.ob(15,49152,null,0,i.V,[e.h,e.k,e.x],{color:[0,"color"],value:[1,"value"]},null),(l()(),e.pb(16,0,null,0,3,"div",[["style","align-self: flex-start !important; align-items: start; position: fixed; display: flow-root;"]],null,null,null,null,null)),(l()(),e.pb(17,0,null,null,2,"ion-back-button",[["defaultHref","/primary-name"],["slot","start"]],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e.Bb(l,19).onClick(t)&&u),u}),s.N,s.c)),e.ob(18,49152,null,0,i.f,[e.h,e.k,e.x],{defaultHref:[0,"defaultHref"]},null),e.ob(19,16384,null,0,i.g,[[2,i.eb],i.Fb],{defaultHref:[0,"defaultHref"]},null),(l()(),e.pb(20,0,null,0,1,"div",[["class","ion-text-center"]],null,null,null,null,null)),(l()(),e.pb(21,0,null,null,0,"img",[["src","assets/icon/otp.svg"]],null,null,null,null,null)),(l()(),e.pb(22,0,null,0,7,"ion-card-header",[],null,null,null,s.R,s.h)),e.ob(23,49152,null,0,i.n,[e.h,e.k,e.x],null,null),(l()(),e.pb(24,0,null,0,2,"ion-card-subtitle",[["class","ion-text-center"]],null,null,null,s.S,s.i)),e.ob(25,49152,null,0,i.o,[e.h,e.k,e.x],null,null),(l()(),e.Hb(-1,0,["Customer Info"])),(l()(),e.pb(27,0,null,0,2,"ion-card-title",[],null,null,null,s.T,s.j)),e.ob(28,49152,null,0,i.p,[e.h,e.k,e.x],null,null),(l()(),e.Hb(29,0,["Enter the verification code we send to +1",""])),(l()(),e.pb(30,0,null,0,20,"ion-card-content",[],null,null,null,s.Q,s.g)),e.ob(31,49152,null,0,i.m,[e.h,e.k,e.x],null,null),(l()(),e.pb(32,0,null,0,13,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,t){var u=!0;return"submit"===n&&(u=!1!==e.Bb(l,34).onSubmit(t)&&u),"reset"===n&&(u=!1!==e.Bb(l,34).onReset()&&u),u}),null,null)),e.ob(33,16384,null,0,r.u,[],null,null),e.ob(34,540672,null,0,r.g,[[8,null],[8,null]],{form:[0,"form"]},null),e.Eb(2048,null,r.a,null,[r.g]),e.ob(36,16384,null,0,r.n,[[4,r.a]],null,null),(l()(),e.pb(37,0,null,null,8,"ion-input",[["class","roundedInput"],["formControlName","otp"],["maxlength","4"],["size","4"],["style","text-align: center;"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var u=!0,o=l.component;return"ionBlur"===n&&(u=!1!==e.Bb(l,40)._handleBlurEvent(t.target)&&u),"ionChange"===n&&(u=!1!==e.Bb(l,40)._handleInputEvent(t.target)&&u),"keyup"===n&&(u=!1!==o.OTP(t)&&u),u}),s.eb,s.t)),e.ob(38,540672,null,0,r.i,[],{maxlength:[0,"maxlength"]},null),e.Eb(1024,null,r.j,(function(l){return[l]}),[r.i]),e.ob(40,16384,null,0,i.Mb,[e.k],null,null),e.Eb(1024,null,r.k,(function(l){return[l]}),[i.Mb]),e.ob(42,671744,null,0,r.e,[[3,r.a],[6,r.j],[8,null],[6,r.k],[2,r.t]],{name:[0,"name"]},null),e.Eb(2048,null,r.l,null,[r.e]),e.ob(44,16384,null,0,r.m,[[4,r.l]],null,null),e.ob(45,49152,null,0,i.F,[e.h,e.k,e.x],{maxlength:[0,"maxlength"],size:[1,"size"],type:[2,"type"]},null),(l()(),e.pb(46,0,null,0,4,"div",[["style","text-align: center;"]],null,null,null,null,null)),(l()(),e.eb(16777216,null,null,1,null,m)),e.ob(48,16384,null,0,a.i,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.eb(16777216,null,null,1,null,f)),e.ob(50,16384,null,0,a.i,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(51,0,null,0,5,"ion-card-header",[],null,null,null,s.R,s.h)),e.ob(52,49152,null,0,i.n,[e.h,e.k,e.x],null,null),(l()(),e.eb(16777216,null,0,1,null,x)),e.ob(54,16384,null,0,a.i,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.eb(16777216,null,0,1,null,v)),e.ob(56,16384,null,0,a.i,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(57,0,null,0,1,"ion-progress-bar",[["color","danger"],["value","0.5"]],null,null,null,s.kb,s.z)),e.ob(58,49152,null,0,i.V,[e.h,e.k,e.x],{color:[0,"color"],value:[1,"value"]},null)],(function(l,n){var t=n.component;l(n,15,0,"danger","0.3"),l(n,18,0,"/primary-name"),l(n,19,0,"/primary-name"),l(n,34,0,t.otpForm),l(n,38,0,"4"),l(n,42,0,"otp"),l(n,45,0,"4","4","text"),l(n,48,0,t.maxtime>0),l(n,50,0,0==t.maxtime),l(n,54,0,t.isNextBtnDisabled),l(n,56,0,!t.isNextBtnDisabled),l(n,58,0,"danger","0.5")}),(function(l,n){l(n,29,0,n.component.number),l(n,32,0,e.Bb(n,36).ngClassUntouched,e.Bb(n,36).ngClassTouched,e.Bb(n,36).ngClassPristine,e.Bb(n,36).ngClassDirty,e.Bb(n,36).ngClassValid,e.Bb(n,36).ngClassInvalid,e.Bb(n,36).ngClassPending),l(n,37,0,e.Bb(n,38).maxlength?e.Bb(n,38).maxlength:null,e.Bb(n,44).ngClassUntouched,e.Bb(n,44).ngClassTouched,e.Bb(n,44).ngClassPristine,e.Bb(n,44).ngClassDirty,e.Bb(n,44).ngClassValid,e.Bb(n,44).ngClassInvalid,e.Bb(n,44).ngClassPending)}))}function w(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"app-otp",[],null,null,null,k,g)),e.ob(1,114688,null,0,h,[c.a,p.c,d.m,i.Nb,i.Cb,i.a],null,null)],(function(l,n){l(n,1,0)}),null)}var C=e.lb("app-otp",h,w,{},{},[]);class y{transform(l){return Object.keys(l)}}class B{}class z{}t.d(n,"OTPPageModuleNgFactory",(function(){return O}));var O=e.mb(u,[],(function(l){return e.yb([e.zb(512,e.j,e.X,[[8,[o.a,C]],[3,e.j],e.v]),e.zb(4608,a.k,a.j,[e.s,[2,a.r]]),e.zb(4608,r.s,r.s,[]),e.zb(4608,i.b,i.b,[e.x,e.g]),e.zb(4608,i.Eb,i.Eb,[i.b,e.j,e.p]),e.zb(4608,i.Ib,i.Ib,[i.b,e.j,e.p]),e.zb(4608,r.c,r.c,[]),e.zb(4608,y,y,[]),e.zb(1073742336,a.b,a.b,[]),e.zb(1073742336,r.r,r.r,[]),e.zb(1073742336,r.h,r.h,[]),e.zb(1073742336,i.Ab,i.Ab,[]),e.zb(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),e.zb(1073742336,z,z,[]),e.zb(1073742336,r.p,r.p,[]),e.zb(1073742336,B,B,[]),e.zb(1073742336,u,u,[]),e.zb(1024,d.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);